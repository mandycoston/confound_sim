---
title: "Visualization Notebook"
output: html_notebook
---
```{r}
library(tidyverse)
```


```{r}
prop_cutoff <- .95
num <- 12
mse_all1 <- readRDS(glue::glue("results/prop{prop_cutoff*100}/mse{num}.Rds"))

for (i in c(0:(num-1))){
  mse_all1 <- rbind(mse_all1, readRDS(glue::glue("results/prop{prop_cutoff*100}/mse{i}.Rds")))
}

mse_all1 %>%
  dplyr::filter(eps_n_exp == .25,
                eps_sd == 5) -> mse_sim1

```
 
 > Don't see much of a difference as we vary the noise
 


```{r}
mse_all %>%
  ggplot(aes(x=eps_n_exp, y= mse, color = method, fill = method))  + geom_ribbon(aes(ymin=low, ymax=high), alpha = 0.4)+ geom_line()+ ylab('Mean Squared Error') + facet_grid(eps_sd ~.) + theme_grey(base_size=12)    + theme(legend.position = "bottom") 

```
```{r}
filter(mse_all, eps_n_exp == .3) %>%
  ggplot(aes(x=eps_sd, y= mse, color = method, fill = method)) + geom_line()+ ylab('Mean Squared Error')  + theme_grey(base_size=12)    + theme(legend.position = "bottom") 
```

> Vary c


```{r}
prop_cutoff <- .95
num <- 11
mse_all <- readRDS(glue::glue("results/prop{prop_cutoff*100}/c/mse{num}.Rds"))

for (i in c(1:(num-1))){
  mse_all <- rbind(mse_all, readRDS(glue::glue("results/prop{prop_cutoff*100}/c/mse{i}.Rds")))
}

```

```{r}
mse_all %>%
  ggplot(aes(x=c, y= mse, color = method, fill = method))  + geom_ribbon(aes(ymin=low, ymax=high), alpha = 0.4)+ geom_line()+ ylab('Mean Squared Error')  + theme_grey(base_size=12)    + theme(legend.position = "bottom") 
```


> Vary error much more over a wide range of variances and exponents 

```{r}
prop_cutoff <- .95
num <- 41
mse_all <- readRDS(glue::glue("results/prop{prop_cutoff*100}/error/mse{num}.Rds"))

for (i in c(1:(num-1))){
  mse_all <- rbind(mse_all, readRDS(glue::glue("results/prop{prop_cutoff*100}/error/mse{i}.Rds")))
}

```

```{r}
mse_all %>%
  dplyr::filter(eps_n_exp >= .2,
                eps_sd <= 5,
                method %in% c("plug-in", "bias-corrected")) %>%
  ggplot(aes(x=eps_sd, y= mse, color = method, fill = method))  + geom_ribbon(aes(ymin=low, ymax=high), alpha = 0.4)+ geom_line()+ facet_grid(eps_n_exp~.) + ylab('Mean Squared Error') + theme_grey(base_size=12)    + theme(legend.position = "bottom") 

```




```{r}

```


```{r}
mse_all %>%
  dplyr::filter(eps_sd <= 10,
                method %in% c("plug-in", "bias-corrected")) %>%
  ggplot(aes(x=eps_sd, y= mse, color = method, fill = method))  + geom_ribbon(aes(ymin=low, ymax=high), alpha = 0.4)+ geom_line()+ facet_grid(eps_n_exp~.) + ylab('Mean Squared Error') + theme_grey(base_size=12)   + theme(legend.position = "bottom") 

```

 same data, different display
 
```{r}
mse_all %>%
  dplyr::filter(eps_n_exp >= .2,
                eps_sd <= 5,
                method %in% c("plug-in", "bias-corrected")) %>%
  ggplot(aes(x=eps_n_exp, y= mse, color = method, fill = method))  + geom_ribbon(aes(ymin=low, ymax=high), alpha = 0.4)+ geom_line()+ facet_grid(eps_sd~.) + ylab('Mean Squared Error') + theme_grey(base_size=12)    + theme(legend.position = "bottom") 

```  








